<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>视频搜索</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script charset="UTF-8">
			$(document).ready(function(){
				var so_keyword = decodeURI(window.location.href.toString().split("keyword=")[1]);
				var so_sugg_url = "http://suggest.video.iqiyi.com/?platform=11&rltnum=1&key=";
				
				$.get(so_sugg_url+so_keyword,function(data,status){
					parseData(data);
				});
				
			});
			function parseData(data){
				var data = JSON.parse(data);//转化为JSON对象
				data = data.data;//获取数据部分
				if(data.length==1){//如果数据数组为1，则有搜索结果
					var datarel = data[0];//有效数据
					var link = datarel.link; //视频连接
					if(link==""){ //如果连接为空说明无法观看
						document.write("No result!");
					}else{//数据确实有效
						//加载dom
						showView(datarel.cid,datarel.cname,datarel.name,datarel.picture_url,datarel.link,datarel.director,datarel.main_actor,datarel.year);
					}
					
					console.log(datarel);
				}else{//否则无搜索结果
					document.write("No result!")
				}
			}
			function showView(cid,cname,name,pic_url,link,director,actor,year){
				$("#v-pic").attr('src',pic_url);
				$("#v-name").html(name);
				$("#v-year").html(year);
				$("#v-director").html(director.toString());
				$("#v-actor").html(actor.toString());
				$("#v-link").attr('href',"index.html?url="+link);
			}
		</script>
	</head>
	<body class="bg-info">
		<nav class="navbar navbar-inverse" style="margin: 0;padding: 0;border-radius: 0;">
		 	 <div class="container-fluid">
			    <!-- Brand and toggle get grouped for better mobile display -->
			    <div class="navbar-header">
	    	 		<img class="navbar-brand" src="img/logo.jpg" />
	      			<a class="navbar-brand"  href="#">电影免费看</a>
			    </div>
			    <!-- Collect the nav links, forms, and other content for toggling -->
			    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			      <ul class="nav navbar-nav">
			        <li class="active"><a href="http://vip.iqiyi.com/?fc=b4df9faa4b31aec4" target="_blank">爱奇艺VIP<span class="sr-only">(current)</span></a></li>
			        <li><a href="http://film.qq.com/x/2017/" target="_blank">腾讯视频VIP</a></li>
			        <li><a href="http://vip.youku.com/" target="_blank">优酷VIP</a></li>
			        <li class="dropdown">
			          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">更多VIP链接<span class="caret"></span></a>
			          <ul class="dropdown-menu">
			            <li><a href="https://film.sohu.com/vip.html" target="_blank">搜狐视频VIP</a></li>
			           	<li><a href="http://vip.le.com/" target="_blank">乐视VIP</a></li>
			           	<li><a href="http://vip.pptv.com/" target="_blank">PPTV聚力VIP</a></li>
			           	<li><a href="http://vip.baofeng.com/" target="_blank">暴风影音VIP</a></li>
			            <li><a href="http://movie.ku6.com/" target="_blank">酷6网VIP</a></li>
			            <li role="separator" class="divider"></li>
			            <li><a href="http://new.tudou.com/" target="_blank">土豆</a></li>
			            <li><a href="http://video.sina.com.cn/" target="_blank">新浪视频</a></li>
			            <li><a href="http://www.56.com/movie" target="_blank">我乐网</a></li>
			            <li><a href="https://www.bilibili.com/index.html" target="_blank">哔哩哔哩</a></li>
			          </ul>
			        </li>
			      </ul>
			      <form action="so.html" class="navbar-form navbar-left" method="get">
			        <div class="form-group">
			          <input name="keyword" type="text" class="form-control" placeholder="VIP 电影搜索">
			        </div>
			        <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-search">搜索</span></button>
			      </form>
			      <ul class="nav navbar-nav navbar-right">
			        <li><a href="help.html">帮助中心</a></li>
			        <li class="dropdown">
			          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">赞助我<span class="caret"></span></a>
			          <ul class="dropdown-menu">
			            <li><a href="img/sponsor/alipay.jpg" target="_blank"><img src="img/sponsor/alipay.jpg" style="width: 155px;height: 150px;"/></a></li>
			            <li><a href="img/sponsor/weixinpay.png" target="_blank"><img src="img/sponsor/weixinpay.png" style="width:155px;height: 150px;"/></a></li>
			          </ul>
			        </li>
			      </ul>
		    	</div><!-- /.navbar-collapse -->
		 	 </div><!-- /.container-fluid -->
		</nav>
		<div class="container" style="margin-top:40px;">
			<div class="row">
				<div class="col-md-2"></div>
				<div class="col-md-4">
					<a id="v-link" href="javascript:void(0);"><img id="v-pic" src="" style="width: 180px;height: 235px;"/></a>
				</div>
				<div class="col-md-4">
					<p class="h5" style="color:red;"><span id="v-name"></span>&nbsp;<small id="v-year"></small></p>
					<p><span style="color:#777777">导演：</span><span id="v-director"></span></p>
					<p><span style="color:#777777">主演：</span><span id="v-actor"></span></p>
				</div>
				<div class="col-md-2"></div>
			</div>
		</div>
	</body>
</html>
